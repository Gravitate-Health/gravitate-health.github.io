"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2824],{7623:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"tutorial-Lens/Testing your Lens","title":"Testing Your Lens","description":"Comprehensive testing ensures your Lens operates correctly, maintains regulatory compliance, and delivers the intended personalization without removing regulated content. Use a combination of automated unit tests and visual inspection to validate your lens implementation.","source":"@site/docs/tutorial-Lens/5 - Testing your Lens.md","sourceDirName":"tutorial-Lens","slug":"/tutorial-Lens/Testing your Lens","permalink":"/docs/tutorial-Lens/Testing your Lens","draft":false,"unlisted":false,"editUrl":"https://github.com/gravitate-health/gravitate-health.github.io/tree/main/docs/tutorial-Lens/5 - Testing your Lens.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Deploying your Lens","permalink":"/docs/tutorial-Lens/Deploying your lens"},"next":{"title":"Lens Examples","permalink":"/docs/tutorial-Lens/Examples"}}');var i=t(4848),l=t(8453);const a={},r="Testing Your Lens",c={},o=[{value:"Unit Testing",id:"unit-testing",level:2},{value:"Overview",id:"overview",level:3},{value:"Running Unit Tests",id:"running-unit-tests",level:3},{value:"Test Structure",id:"test-structure",level:3},{value:"Test Data Customization",id:"test-data-customization",level:3},{value:"Best Practices for Unit Testing",id:"best-practices-for-unit-testing",level:3},{value:"Visual Testing",id:"visual-testing",level:2},{value:"Using the Focusing Inspector",id:"using-the-focusing-inspector",level:3},{value:"Setting Up Visual Testing",id:"setting-up-visual-testing",level:3},{value:"1. Install the Focusing SDK",id:"1-install-the-focusing-sdk",level:4},{value:"2. Load Your Lens",id:"2-load-your-lens",level:4},{value:"3. Execute and Inspect",id:"3-execute-and-inspect",level:4},{value:"Visual Testing Checklist",id:"visual-testing-checklist",level:3},{value:"Content Verification",id:"content-verification",level:4},{value:"Highlighting/Collapsing",id:"highlightingcollapsing",level:4},{value:"Supplementary Content",id:"supplementary-content",level:4},{value:"Patient Context Scenarios",id:"patient-context-scenarios",level:4},{value:"Performance",id:"performance",level:4},{value:"Accessibility",id:"accessibility",level:4}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"testing-your-lens",children:"Testing Your Lens"})}),"\n",(0,i.jsx)(s.admonition,{title:"Testing Philosophy",type:"tip",children:(0,i.jsxs)(s.p,{children:["Comprehensive testing ensures your ",(0,i.jsx)(s.a,{href:"/reference/lens",children:"Lens"})," operates correctly, maintains regulatory compliance, and delivers the intended personalization without removing regulated content. Use a combination of automated unit tests and visual inspection to validate your lens implementation."]})}),"\n",(0,i.jsxs)(s.p,{children:["Testing lenses involves two complementary approaches: ",(0,i.jsx)(s.strong,{children:"automated unit testing"})," for functionality validation and ",(0,i.jsx)(s.strong,{children:"visual testing"})," for user experience verification."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"unit-testing",children:"Unit Testing"}),"\n",(0,i.jsx)(s.h3,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.a,{href:"https://github.com/Gravitate-Health/lens-template",children:"lens-template repository"})," includes a comprehensive test suite that enables automated testing of your lens implementation. Unit tests validate that your lens:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Does not remove or alter regulated content"}),"\n",(0,i.jsxs)(s.li,{children:["Applies correct CSS classes (",(0,i.jsx)(s.code,{children:"highlight"}),", ",(0,i.jsx)(s.code,{children:"collapse"}),") based on patient data"]}),"\n",(0,i.jsx)(s.li,{children:"Adds supplementary content in appropriate locations"}),"\n",(0,i.jsx)(s.li,{children:"Handles edge cases and invalid inputs gracefully"}),"\n",(0,i.jsx)(s.li,{children:"Performs within acceptable execution time limits"}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{title:"Critical Compliance Test",type:"warning",children:(0,i.jsxs)(s.p,{children:["The most important test validates that ",(0,i.jsx)(s.strong,{children:"no content is removed"})," from the original ",(0,i.jsx)(s.a,{href:"/reference/epi",children:"ePI"}),". This ensures regulatory compliance and patient safety."]})}),"\n",(0,i.jsxs)(s.p,{children:["Read the ",(0,i.jsx)(s.a,{href:"https://github.com/Gravitate-Health/lens-template/tree/main/tests#readme",children:"Test README"})," for more detailed information about testing and developing tests."]}),"\n",(0,i.jsx)(s.h3,{id:"running-unit-tests",children:"Running Unit Tests"}),"\n",(0,i.jsx)(s.p,{children:"The lens template provides npm scripts for running tests:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Run all tests once\nnpm test\n\n# Run tests in watch mode (re-runs on file changes)\nnpm test -- --watch\n\n# Run tests with coverage report\nnpm test -- --coverage\n\n# Run specific test file\nnpm test -- path/to/test-file.test.js\n"})}),"\n",(0,i.jsx)(s.h3,{id:"test-structure",children:"Test Structure"}),"\n",(0,i.jsx)(s.p,{children:"A typical lens test suite includes:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Content Preservation Tests"}),"\n",(0,i.jsx)(s.li,{children:"Functional Tests, These verify your lens applies the correct focusing logic."}),"\n",(0,i.jsx)(s.li,{children:"Edge Case Tests, Test boundary conditions and error handling."}),"\n",(0,i.jsx)(s.li,{children:"Supplementary Content Tests"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"test-data-customization",children:"Test Data Customization"}),"\n",(0,i.jsx)(s.p,{children:"The lens template includes sample test data that you should customize for your use case."}),"\n",(0,i.jsx)(s.h3,{id:"best-practices-for-unit-testing",children:"Best Practices for Unit Testing"}),"\n",(0,i.jsx)(s.admonition,{title:"Testing Best Practices",type:"tip",children:(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Test one thing at a time"}),": Each test should validate a single behavior"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Use descriptive test names"}),": Clearly state what is being tested"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Test both positive and negative cases"}),": Verify expected behavior and error handling"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Keep tests independent"}),": Tests should not depend on each other's state"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Use test fixtures"}),": Create reusable test data to avoid duplication"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Aim for high coverage"}),": Target 80%+ code coverage for critical lens logic"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Run tests frequently"}),": Test after each significant code change"]}),"\n"]})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"visual-testing",children:"Visual Testing"}),"\n",(0,i.jsx)(s.h3,{id:"using-the-focusing-inspector",children:"Using the Focusing Inspector"}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.strong,{children:"Focusing Inspector"})," tool provides a visual interface for testing lens operation and seeing the actual rendered output. This tool is part of the ",(0,i.jsx)(s.a,{href:"https://github.com/Gravitate-Health/focusing-sdk",children:"focusing-SDK"})," and enables you to:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Preview how your lens transforms ePI content"}),"\n",(0,i.jsx)(s.li,{children:"Inspect applied CSS classes visually"}),"\n",(0,i.jsx)(s.li,{children:"Verify supplementary content appears correctly"}),"\n",(0,i.jsx)(s.li,{children:"Test with different IPS and ePI combinations"}),"\n",(0,i.jsx)(s.li,{children:"Debug focusing logic in real-time"}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{title:"Tool Location",type:"info",children:(0,i.jsxs)(s.p,{children:["The Focusing Inspector is available in the ",(0,i.jsx)(s.a,{href:"https://github.com/Gravitate-Health/focusing-sdk",children:"focusing-SDK repository"}),". See the ",(0,i.jsx)(s.a,{href:"/reference/focusing-inspector",children:"Focusing Inspector reference"})," for detailed information."]})}),"\n",(0,i.jsx)(s.h3,{id:"setting-up-visual-testing",children:"Setting Up Visual Testing"}),"\n",(0,i.jsx)(s.h4,{id:"1-install-the-focusing-sdk",children:"1. Install the Focusing SDK"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Clone the focusing-SDK repository\ngit clone https://github.com/Gravitate-Health/focusing-sdk.git\ncd focusing-sdk\n\n# Start the Focusing Inspector\ndocker-compose up -d\n"})}),"\n",(0,i.jsx)(s.h4,{id:"2-load-your-lens",children:"2. Load Your Lens"}),"\n",(0,i.jsx)(s.p,{children:"There are 3 main methods to load your lens into the SDK"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["The easiest is just to copy/develop your lens in the ",(0,i.jsx)(s.code,{children:"Lenses"})," folder. There is a lens-selector-file already configured to monitor this folder."]}),"\n",(0,i.jsx)(s.li,{children:"You can add another lens-selector-file service which monitors another folder in your file system."}),"\n",(0,i.jsxs)(s.li,{children:["add a lens-selector-git service pointing to your git repository (remember to set ",(0,i.jsx)(s.code,{children:"CACHE_TTL_MINUTES"})," to 0 if you want it to load the latest commit every time)"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"3-execute-and-inspect",children:"3. Execute and Inspect"}),"\n",(0,i.jsx)(s.p,{children:"Once loaded:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Execute prerequisites"}),", which are selecting an input ePI, and preprocessing it."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Select an IPS"})," which will determine the patient profile (remember you can edit this in the ",(0,i.jsx)(s.code,{children:"patient"}),"folder)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Execute the lens"})," to generate the ",(0,i.jsx)(s.a,{href:"/reference/f-epi",children:"f(ePI)"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"View side-by-side comparison"})," of original and focused ePI"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Inspect HTML changes"})," to see applied classes and added content"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Toggle views"})," between different focusing modes (programmer view vs. end-user view)"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"visual-testing-checklist",children:"Visual Testing Checklist"}),"\n",(0,i.jsx)(s.p,{children:"Use this checklist when visually testing your lens:"}),"\n",(0,i.jsx)(s.h4,{id:"content-verification",children:"Content Verification"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","All original text is visible or accessible (not deleted)"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Collapsed sections can be expanded to view hidden content"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","No broken HTML structure or rendering issues"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"highlightingcollapsing",children:"Highlighting/Collapsing"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Relevant sections are visually highlighted appropriately"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Irrelevant sections are collapsed/dimmed but not removed"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Standard sections remain with normal styling"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Visual hierarchy makes sense for patient understanding"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"supplementary-content",children:"Supplementary Content"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Added links open to correct destinations"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Added images/icons display correctly"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Added interactive elements function properly"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","New content doesn't obscure original information"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"patient-context-scenarios",children:"Patient Context Scenarios"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Test with different ages (pediatric, adult, geriatric)"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Test with various medical conditions"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Test with different medication lists"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Test with edge cases (missing data, extreme values)"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"performance",children:"Performance"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Lens executes quickly (< 2 seconds for typical ePI)"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Page remains responsive after focusing"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","No console errors or warnings"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"accessibility",children:"Accessibility"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Focus indicators work correctly for keyboard navigation"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Color contrast meets accessibility standards"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Screen reader compatibility (if applicable)"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>r});var n=t(6540);const i={},l=n.createContext(i);function a(e){const s=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);