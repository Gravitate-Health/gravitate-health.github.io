"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[338],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var i=s(6540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},8513:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"tutorial-Lens/Advanced Topic Lens dependencies","title":"Advanced Topic: Adding dependencies to your lens","description":"It is assumed that lenses are bundled within a single JS object, but it may be possible to embed dependencies, like libraries, to your lens.","source":"@site/docs/tutorial-Lens/7 - Advanced Topic Lens dependencies.md","sourceDirName":"tutorial-Lens","slug":"/tutorial-Lens/Advanced Topic Lens dependencies","permalink":"/docs/tutorial-Lens/Advanced Topic Lens dependencies","draft":false,"unlisted":false,"editUrl":"https://github.com/gravitate-health/gravitate-health.github.io/tree/main/docs/tutorial-Lens/7 - Advanced Topic Lens dependencies.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Lens Examples","permalink":"/docs/tutorial-Lens/Examples"}}');var t=s(4848),l=s(8453);const r={},d="Advanced Topic: Adding dependencies to your lens",c={},o=[{value:"1. Using esbuild (fastest + simplest)",id:"1-using-esbuild-fastest--simplest",level:2},{value:"2. Using Rollup (best for libraries)",id:"2-using-rollup-best-for-libraries",level:2},{value:"3. Using Webpack (best for complex apps)",id:"3-using-webpack-best-for-complex-apps",level:2},{value:"4. Using the TypeScript compiler (tsc) alone?",id:"4-using-the-typescript-compiler-tsc-alone",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"advanced-topic-adding-dependencies-to-your-lens",children:"Advanced Topic: Adding dependencies to your lens"})}),"\n",(0,t.jsx)(n.p,{children:"It is assumed that lenses are bundled within a single JS object, but it may be possible to embed dependencies, like libraries, to your lens."}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsx)(n.p,{children:"The content in this page is not tested."})}),"\n",(0,t.jsx)(n.p,{children:"It is possible bundle a TypeScript project into a single JavaScript file. There are several common ways to do it depending on the tooling you prefer."}),"\n",(0,t.jsx)(n.p,{children:"Below are the most practical options:"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"1-using-esbuild-fastest--simplest",children:"1. Using esbuild (fastest + simplest)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Install:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev esbuild\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Bundle:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx esbuild src/index.ts --bundle --outfile=dist/bundle.js --platform=node\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or for browser:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx esbuild src/index.ts --bundle --outfile=dist/bundle.js --platform=browser\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can add:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--minify"})," for minification"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--sourcemap"})," for debugging"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"2-using-rollup-best-for-libraries",children:"2. Using Rollup (best for libraries)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Install:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev rollup @rollup/plugin-typescript typescript\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"rollup.config.js"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import typescript from "@rollup/plugin-typescript";\n\nexport default {\n  input: "src/index.ts",\n  output: {\n    file: "dist/bundle.js",\n    format: "cjs" // or "esm", "iife"\n  },\n  plugins: [typescript()],\n};\n'})}),"\n",(0,t.jsx)(n.p,{children:"Bundle:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx rollup -c\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"3-using-webpack-best-for-complex-apps",children:"3. Using Webpack (best for complex apps)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Install:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev webpack webpack-cli ts-loader typescript\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"webpack.config.js"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'module.exports = {\n  entry: "./src/index.ts",\n  output: {\n    filename: "bundle.js",\n    path: __dirname + "/dist"\n  },\n  resolve: {\n    extensions: [".ts", ".js"],\n  },\n  module: {\n    rules: [\n      { test: /\\.ts$/, use: "ts-loader" }\n    ]\n  }\n};\n'})}),"\n",(0,t.jsx)(n.p,{children:"Build:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx webpack\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"4-using-the-typescript-compiler-tsc-alone",children:"4. Using the TypeScript compiler (tsc) alone?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"tsc"})," ",(0,t.jsx)(n.strong,{children:"cannot"})," bundle into a single file by itself\n(except for experimental ",(0,t.jsx)(n.code,{children:"--outFile"}),", which only works for AMD/SystemJS modules)."]}),"\n",(0,t.jsx)(n.p,{children:"So most real projects use a bundler."})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);