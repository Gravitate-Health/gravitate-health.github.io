"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2134],{8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var i=r(6540);const s={},t=i.createContext(s);function c(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(t.Provider,{value:n},e.children)}},8678:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"lee","title":"LEE (Lens Execution Environment)","description":"The LEE (Lens Execution Environment) is the service that executes Lens logic on p(ePI) using patient contextual data to produce the final f(ePI).","source":"@site/ref/lee.md","sourceDirName":".","slug":"/lee","permalink":"/reference/lee","draft":false,"unlisted":false,"editUrl":"https://github.com/gravitate-health/gravitate-health.github.io/tree/main/ref/lee.md","tags":[{"inline":true,"label":"focusing","permalink":"/reference/tags/focusing"},{"inline":true,"label":"lee","permalink":"/reference/tags/lee"},{"inline":true,"label":"lens-execution","permalink":"/reference/tags/lens-execution"},{"inline":true,"label":"service-layer","permalink":"/reference/tags/service-layer"}],"version":"current","sidebarPosition":36,"frontMatter":{"sidebar_position":36,"title":"LEE (Lens Execution Environment)","tags":["focusing","lee","lens-execution","service-layer"]},"sidebar":"tutorialSidebar","previous":{"title":"Lens","permalink":"/reference/lens"},"next":{"title":"f(ePI) - Focused ePI","permalink":"/reference/f-epi"}}');var s=r(4848),t=r(8453);const c={sidebar_position:36,title:"LEE (Lens Execution Environment)",tags:["focusing","lee","lens-execution","service-layer"]},l="Lens Execution Environment (LEE)",o={},a=[{value:"Purpose",id:"purpose",level:2},{value:"Execution Process",id:"execution-process",level:2},{value:"Helper Methods",id:"helper-methods",level:2},{value:"modifyCSSClass()",id:"modifycssclass",level:3},{value:"addNewContent()",id:"addnewcontent",level:3},{value:"Execution Modes",id:"execution-modes",level:2},{value:"Client-Side Focusing",id:"client-side-focusing",level:3},{value:"Server-Side Focusing",id:"server-side-focusing",level:3},{value:"Security &amp; Isolation",id:"security--isolation",level:2},{value:"Architecture Position",id:"architecture-position",level:2},{value:"Integration",id:"integration",level:2},{value:"Related Concepts",id:"related-concepts",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"lens-execution-environment-lee",children:"Lens Execution Environment (LEE)"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"LEE"})," (Lens Execution Environment) is the service that executes ",(0,s.jsx)(n.a,{href:"/reference/lens",children:"Lens"})," logic on ",(0,s.jsx)(n.a,{href:"/reference/p-epi",children:"p(ePI)"})," using patient contextual data to produce the final ",(0,s.jsx)(n.a,{href:"/reference/f-epi",children:"f(ePI)"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,s.jsxs)(n.p,{children:["LEE provides a ",(0,s.jsx)(n.strong,{children:"sandboxed runtime environment"})," for executing ",(0,s.jsx)(n.a,{href:"/reference/lens",children:"Lens"})," JavaScript code safely and efficiently."]}),"\n",(0,s.jsx)(n.h2,{id:"execution-process",children:"Execution Process"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Receives request from ",(0,s.jsx)(n.a,{href:"/reference/focusing-manager",children:"Focusing Manager"})]}),"\n",(0,s.jsxs)(n.li,{children:["Loads ",(0,s.jsx)(n.a,{href:"/reference/lens",children:"Lens"})," code from FHIR Library resource"]}),"\n",(0,s.jsx)(n.li,{children:"Decodes Base64 content, then interprets as UTF-8 JavaScript"}),"\n",(0,s.jsxs)(n.li,{children:["Prepares inputs: ",(0,s.jsx)(n.a,{href:"/reference/p-epi",children:"p(ePI)"}),", ",(0,s.jsx)(n.a,{href:"/reference/ips",children:"IPS"}),", ",(0,s.jsx)(n.a,{href:"/reference/persona-vector",children:"PV"})]}),"\n",(0,s.jsx)(n.li,{children:"Executes lens in isolated context"}),"\n",(0,s.jsxs)(n.li,{children:["Applies modifications to generate ",(0,s.jsx)(n.a,{href:"/reference/f-epi",children:"f(ePI)"})]}),"\n",(0,s.jsxs)(n.li,{children:["Returns result to ",(0,s.jsx)(n.a,{href:"/reference/focusing-manager",children:"Focusing Manager"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"helper-methods",children:"Helper Methods"}),"\n",(0,s.jsxs)(n.p,{children:["LEE provides APIs for ",(0,s.jsx)(n.a,{href:"/reference/lens",children:"Lenses"})," to use:"]}),"\n",(0,s.jsx)(n.h3,{id:"modifycssclass",children:"modifyCSSClass()"}),"\n",(0,s.jsxs)(n.p,{children:["Applies ",(0,s.jsx)(n.a,{href:"/reference/attention-modification",children:"attention detail modifications"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'// Function signature\nmodifyCSSClass(elementClass, action)\n\n// Examples\nmodifyCSSClass("pregnancy-warning", "highlight");\nmodifyCSSClass("pediatric-info", "collapse");\nmodifyCSSClass("general-info", "standard");\n'})}),"\n",(0,s.jsx)(n.h3,{id:"addnewcontent",children:"addNewContent()"}),"\n",(0,s.jsx)(n.p,{children:"Inserts supplementary HTML:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'// Function signature\naddNewContent(targetLocation, htmlContent)\n\n// Examples\naddNewContent("section-4", \'<a href="/sm/guide">Read more</a>\');\naddNewContent("warnings", \'<img src="/icons/warning.png" />\');\naddNewContent("dosing", \'<video src="/videos/howto.mp4"></video>\');\n'})}),"\n",(0,s.jsx)(n.h2,{id:"execution-modes",children:"Execution Modes"}),"\n",(0,s.jsx)(n.h3,{id:"client-side-focusing",children:"Client-Side Focusing"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"LEE runs in patient's browser/app"}),"\n",(0,s.jsxs)(n.li,{children:["Uses local patient data (",(0,s.jsx)(n.a,{href:"/reference/ips",children:"IPS"}),"/",(0,s.jsx)(n.a,{href:"/reference/persona-vector",children:"PV"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Privacy-preserving (data never leaves device)"}),"\n",(0,s.jsxs)(n.li,{children:["Requires lightweight ",(0,s.jsx)(n.a,{href:"/reference/lens",children:"Lenses"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"server-side-focusing",children:"Server-Side Focusing"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["LEE runs on ",(0,s.jsx)(n.a,{href:"/reference/fosps",children:"FOSPS"})," servers"]}),"\n",(0,s.jsx)(n.li,{children:"Receives patient data from secure sources"}),"\n",(0,s.jsx)(n.li,{children:"Must scale for concurrent users"}),"\n",(0,s.jsx)(n.li,{children:"Enables more complex lenses"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"security--isolation",children:"Security & Isolation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sandboxed execution"}),": Lenses cannot access system resources"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Time limits"}),": Prevent infinite loops"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Memory limits"}),": Prevent resource exhaustion"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API restrictions"}),": Only approved helper methods available"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"architecture-position",children:"Architecture Position"}),"\n",(0,s.jsxs)(n.p,{children:["Located in the ",(0,s.jsx)(n.a,{href:"/reference/architectural-layers",children:"Service Layer"})," of ",(0,s.jsx)(n.a,{href:"/reference/fosps",children:"FOSPS"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"integration",children:"Integration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Called by ",(0,s.jsx)(n.a,{href:"/reference/focusing-manager",children:"Focusing Manager"})]}),"\n",(0,s.jsxs)(n.li,{children:["Retrieves ",(0,s.jsx)(n.a,{href:"/reference/lens",children:"Lenses"})," from ",(0,s.jsx)(n.a,{href:"/reference/fhir-server",children:"FHIR Server"})]}),"\n",(0,s.jsxs)(n.li,{children:["Produces ",(0,s.jsx)(n.a,{href:"/reference/f-epi",children:"f(ePI)"})," for end-users"]}),"\n",(0,s.jsxs)(n.li,{children:["Exposed via ",(0,s.jsx)(n.a,{href:"/reference/istio",children:"Istio"})," VirtualService"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-concepts",children:"Related Concepts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/reference/lens",children:"Lens"})," - Executed code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/reference/p-epi",children:"p(ePI)"})," - Input content"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/reference/f-epi",children:"f(ePI)"})," - Output result"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/reference/focusing-manager",children:"Focusing Manager"})," - Orchestrator"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/reference/attention-modification",children:"Attention Modification"})," - Primary operation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/reference/ips",children:"IPS"})," - Patient input"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/reference/persona-vector",children:"Persona Vector"})," - Context input"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);