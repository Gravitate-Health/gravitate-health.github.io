"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8211],{3756:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"tutorial-Preprocessor/Introduction","title":"Introduction","description":"This document provides essential guidance for developers creating Preprocessor services within the Federated Open-Source Platform and Services (FOSPS) environment, particularly focusing on the annotation process for Electronic Product Information (ePI).","source":"@site/docs/tutorial-Preprocessor/0 - Introduction.md","sourceDirName":"tutorial-Preprocessor","slug":"/tutorial-Preprocessor/Introduction","permalink":"/docs/tutorial-Preprocessor/Introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/gravitate-health/gravitate-health.github.io/tree/main/docs/tutorial-Preprocessor/0 - Introduction.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial - Preprocessor","permalink":"/docs/category/tutorial---preprocessor"},"next":{"title":"Develop a Basic Preprocessor","permalink":"/docs/tutorial-Preprocessor/Develop a Basic Preprocessor"}}');var s=t(4848),o=t(8453);const r={sidebar_position:1},a="Introduction",c={},l=[{value:"What Are Preprocessors?",id:"what-are-preprocessors",level:2},{value:"Role in ePI Annotation",id:"role-in-epi-annotation",level:2},{value:"Role in the Focusing Mechanism",id:"role-in-the-focusing-mechanism",level:2},{value:"Understanding the use of standard terminologies (e.g., SNOMED-CT, ICPC-2) for annotation",id:"understanding-the-use-of-standard-terminologies-eg-snomed-ct-icpc-2-for-annotation",level:2},{value:"Use of the HtmlElementLink Extension",id:"use-of-the-htmlelementlink-extension",level:3},{value:"Preprocessor Execution",id:"preprocessor-execution",level:2},{value:"Modularity Benefits",id:"modularity-benefits",level:3},{value:"Service Discovery",id:"service-discovery",level:3},{value:"Technical Requirements for Preprocessor HTML Modification",id:"technical-requirements-for-preprocessor-html-modification",level:2},{value:"Modification Rules",id:"modification-rules",level:3},{value:"1. Modification Limits (<strong>No Content Editing</strong>)",id:"1-modification-limits-no-content-editing",level:4},{value:"2. Adding Classes to Existing Tags",id:"2-adding-classes-to-existing-tags",level:4},{value:"3. Generating Invisible Tags",id:"3-generating-invisible-tags",level:4},{value:"4. Stacking Awareness",id:"4-stacking-awareness",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"introduction",children:"Introduction"})}),"\n",(0,s.jsx)(n.admonition,{title:"Overview",type:"info",children:(0,s.jsx)(n.p,{children:"This document provides essential guidance for developers creating Preprocessor services within the Federated Open-Source Platform and Services (FOSPS) environment, particularly focusing on the annotation process for Electronic Product Information (ePI)."})}),"\n",(0,s.jsx)(n.h2,{id:"what-are-preprocessors",children:"What Are Preprocessors?"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"preprocessor"})," is a software service that annotates an ePI for further processing. Preprocessors are designed to be pluggable components that integrate seamlessly into the platform's focusing workflow. They operate dynamically and can be configured as modules that the Focusing Manager automatically identifies and invokes when an ePI requires preprocessing."]}),"\n",(0,s.jsx)(n.h2,{id:"role-in-epi-annotation",children:"Role in ePI Annotation"}),"\n",(0,s.jsxs)(n.p,{children:["Preprocessors are tasked with performing ",(0,s.jsx)(n.strong,{children:"semantic annotation"})," on ePI content. This crucial process involves reading the ePI and automatically annotating parts of the narrative text. Specifically, preprocessors identify text sections containing information about any topic and semantically link them to clinical terminologies."]}),"\n",(0,s.jsx)(n.admonition,{title:"Goal of Semantic Annotation",type:"note",children:(0,s.jsxs)(n.p,{children:["The goal of semantic annotation is to transform the unstructured narrative text of the ePI into a structured representation, making the information easier to analyze, search, and understand for subsequent processes. These annotations typically consist of codes from standard terminologies, such as ",(0,s.jsx)(n.strong,{children:"SNOMED-CT"})," or ",(0,s.jsx)(n.strong,{children:"ICPC-2"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"role-in-the-focusing-mechanism",children:"Role in the Focusing Mechanism"}),"\n",(0,s.jsxs)(n.p,{children:["Preprocessing is the ",(0,s.jsx)(n.strong,{children:"first step"})," in the multi-stage focusing process. The focusing mechanism itself is defined as adapting information to the context of the end user for effective and optimal understanding of the information."]}),"\n",(0,s.jsx)(n.admonition,{title:"Preprocessing Workflow",type:"tip",children:(0,s.jsxs)(n.p,{children:["The output of the preprocessing stage is the ",(0,s.jsx)(n.strong,{children:"preprocessed ePI"}),", or ",(0,s.jsx)(n.strong,{children:"p(ePI)"}),". The p(ePI) retains the original text content of the raw ePI but is enriched with metadata embedded within the text, matching text sections to for example clinical terminologies. This annotated ePI is then ready to be consumed by the Lenses, which contain the logic for personalization based on user context (like their IPS or preferences)."]})}),"\n",(0,s.jsx)(n.admonition,{title:"Stacking Preprocessors",type:"warning",children:(0,s.jsxs)(n.p,{children:["Preprocessors must be built with the understanding that they may be ",(0,s.jsx)(n.strong,{children:"stacked"}),", i.e., executed sequentially, with other preprocessors to generate a complete annotation of the ePI. The Focusing Manager coordinates this orchestration."]})}),"\n",(0,s.jsx)(n.h2,{id:"understanding-the-use-of-standard-terminologies-eg-snomed-ct-icpc-2-for-annotation",children:"Understanding the use of standard terminologies (e.g., SNOMED-CT, ICPC-2) for annotation"}),"\n",(0,s.jsx)(n.p,{children:"Semantic annotation within the FOSPS relies on the principle of linking sections of the ePI narrative text to standard medical vocabularies, such as SNOMED-CT (Systematized Nomenclature of Medicine Clinical Terms) and ICPC-2 (International Classification of Primary Care version 2). The usage of these standard terminologies is essential to standardize clinical and medical nomenclature and definitions across the platform."}),"\n",(0,s.jsx)(n.h3,{id:"use-of-the-htmlelementlink-extension",children:"Use of the HtmlElementLink Extension"}),"\n",(0,s.jsxs)(n.p,{children:["The mechanism used to link these standard terminology concepts (codes) to specific parts of the ePI narrative text relies on the ",(0,s.jsx)(n.a,{href:"https://build.fhir.org/ig/hl7-eu/gravitate-health/StructureDefinition-HtmlElementLink.html",children:"HtmlElementLink FHIR extension"}),"."]}),"\n",(0,s.jsx)(n.admonition,{title:"About HtmlElementLink",type:"info",children:(0,s.jsx)(n.p,{children:"The HtmlElementLink extension is complex and is utilized for adding information\u2014which may be pictograms, images, video, or other flexible types of data\u2014to ePIs in the FHIR format. It is typically applied to the Composition resource within the ePI Bundle."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"This extension contains sub-extensions to define the linkage:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"extension:concept"})}),": This mandatory component specifies the data to be used, which is generally a reference to a resource, a CodeableConcept (such as a SNOMED-CT or ICPC-2 code), a URL, or a string. This is the standard terminology code representing the clinical concept being annotated."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"extension:elementClass"})}),": This component, required for linking, specifies the location in the HTML to which the concept applies. This value is a string intended to be used as an HTML class attribute."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["By declaring the concept (code) and linking it to a specific ",(0,s.jsx)(n.code,{children:"elementClass"})," using the HtmlElementLink extension, preprocessors enable the narrative text (which is contained within HTML) to feature class attributes that reference these defined concepts."]}),"\n",(0,s.jsx)(n.h2,{id:"preprocessor-execution",children:"Preprocessor Execution"}),"\n",(0,s.jsxs)(n.p,{children:["A Preprocessor is implemented as a ",(0,s.jsx)(n.strong,{children:"containerized service module"})," that is pluggable into FOSPS. This service must expose an endpoint (typically ",(0,s.jsx)(n.code,{children:"/preprocess"}),") that receives the entire ePI resource in its body and responds with the preprocessed version, having performed the semantic annotation."]}),"\n",(0,s.jsx)(n.admonition,{title:"Service Specification",type:"important",children:(0,s.jsxs)(n.p,{children:["The preprocessed response should maintain the original FHIR format of the input ePI, ensuring that no changes are made to the underlying data structure. This simple service is specified in ",(0,s.jsx)(n.a,{href:"https://raw.githubusercontent.com/Gravitate-Health/preprocessing-service-example/refs/heads/main/openapi.yaml",children:"OpenAPI"})," for developer convenience."]})}),"\n",(0,s.jsx)(n.h3,{id:"modularity-benefits",children:"Modularity Benefits"}),"\n",(0,s.jsx)(n.p,{children:"Preprocessors must be implemented as separate services, allowing them to be easily developed, tested, and maintained independently of the rest of the system. This modularity enables a wide range of preprocessing techniques to be integrated into FOSPS, making it possible to handle various use cases and requirements in different languages using different frameworks."}),"\n",(0,s.jsx)(n.h3,{id:"service-discovery",children:"Service Discovery"}),"\n",(0,s.jsxs)(n.admonition,{title:"Docker Tag Requirement",type:"tip",children:[(0,s.jsx)(n.p,{children:"To enable the focusing manager component to locate and orchestrate preprocessors, each preprocessor service should be launched with a specific tag:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"eu.gravitate-health.fosps.preprocessing=True\n"})}),(0,s.jsx)(n.p,{children:"This allows the focusing manager to identify available preprocessors and direct incoming ePI resources through the relevant preprocessing pipeline. The focusing manager will then forward the preprocessed output to the next stage of processing."})]}),"\n",(0,s.jsx)(n.p,{children:"By following this design pattern, developers can easily create and integrate new preprocessing algorithms into FOSPS, enhancing its capabilities and flexibility in handling diverse healthcare data formats and use cases."}),"\n",(0,s.jsx)(n.h2,{id:"technical-requirements-for-preprocessor-html-modification",children:"Technical Requirements for Preprocessor HTML Modification"}),"\n",(0,s.jsx)(n.admonition,{title:"Regulatory Compliance",type:"danger",children:(0,s.jsx)(n.p,{children:"When generating annotations, preprocessors must adhere to strict constraints regarding HTML modifications to ensure regulatory compliance and proper functioning within the Focusing Mechanism."})}),"\n",(0,s.jsx)(n.h3,{id:"modification-rules",children:"Modification Rules"}),"\n",(0,s.jsxs)(n.h4,{id:"1-modification-limits-no-content-editing",children:["1. Modification Limits (",(0,s.jsx)(n.strong,{children:"No Content Editing"}),")"]}),"\n",(0,s.jsx)(n.p,{children:"The content of the ePI is highly regulated and must be preserved exactly as approved. Preprocessors must not remove any content or change the narrative content of the original ePI."}),"\n",(0,s.jsx)(n.admonition,{title:"Edits are strictly limited to technical modifications of the HTML structure",type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Adding HTML class attributes"}),"\n",(0,s.jsx)(n.li,{children:"Adding new HTML tags for the purpose of supplementary information or delineation"}),"\n"]})}),"\n",(0,s.jsx)(n.h4,{id:"2-adding-classes-to-existing-tags",children:"2. Adding Classes to Existing Tags"}),"\n",(0,s.jsx)(n.p,{children:"Preprocessors should utilize HTML markup language to target text portions. Annotations are commonly applied by adding classes to existing HTML tags, such as:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Header tags: ",(0,s.jsx)(n.code,{children:"<h1>"}),", ",(0,s.jsx)(n.code,{children:"<h2>"}),", etc."]}),"\n",(0,s.jsxs)(n.li,{children:["List items: ",(0,s.jsx)(n.code,{children:"<ul>"}),", ",(0,s.jsx)(n.code,{children:"<li>"})]}),"\n",(0,s.jsxs)(n.li,{children:["Paragraphs: ",(0,s.jsx)(n.code,{children:"<p>"})]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"3-generating-invisible-tags",children:"3. Generating Invisible Tags"}),"\n",(0,s.jsx)(n.p,{children:"To mark arbitrary text segments for annotation without affecting the display style, preprocessors may use non-style-changing tags."}),"\n",(0,s.jsx)(n.admonition,{title:"Recommended Tag",type:"tip",children:(0,s.jsxs)(n.p,{children:["The preferred tag for selecting arbitrary text is the ",(0,s.jsx)(n.code,{children:"<span>"})," tag."]})}),"\n",(0,s.jsx)(n.h4,{id:"4-stacking-awareness",children:"4. Stacking Awareness"}),"\n",(0,s.jsx)(n.admonition,{title:"Preprocessor Stacking",type:"warning",children:(0,s.jsx)(n.p,{children:"Since preprocessors can be stacked (a preprocessor's input may be the output of one or more previous preprocessors), developers should implement logic that checks for existing attributes and handles their concatenation to maintain a clean and effective structure."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key considerations:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Duplicate prevention"}),": Avoid adding duplicates like ",(0,s.jsx)(n.code,{children:"extension:concept"}),", or ",(0,s.jsx)(n.code,{children:"extension:elementClass"})," with the same values"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Avoiding HTML Nesting"}),": Developers must be aware that when applying annotations, they should avoid creating redundant or complex HTML structures. If a target HTML element already has a class attribute (potentially added by a preceding preprocessor), the new class attribute referencing the terminology concept should be added to the existing class attributes, rather than wrapping the element in a new, nested tag."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);