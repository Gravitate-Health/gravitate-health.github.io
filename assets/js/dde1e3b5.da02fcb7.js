"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[878],{8272:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"tutorial-Lens/Introduction","title":"Introduction","description":"What are lenses and how they contribute to the Focusing Mechanism?","source":"@site/docs/tutorial-Lens/0 - Introduction.md","sourceDirName":"tutorial-Lens","slug":"/tutorial-Lens/Introduction","permalink":"/docs/tutorial-Lens/Introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/gravitate-health/gravitate-health.github.io/tree/main/docs/tutorial-Lens/0 - Introduction.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial - Lens","permalink":"/docs/category/tutorial---lens"},"next":{"title":"Using Lens Bundler","permalink":"/docs/tutorial-Lens/Using Lens Bundler"}}');var s=t(4848),o=t(8453);const r={sidebar_position:1},a="Introduction",l={},c=[{value:"What are lenses and how they contribute to the Focusing Mechanism?",id:"what-are-lenses-and-how-they-contribute-to-the-focusing-mechanism",level:2},{value:"Lens Operation and Inputs",id:"lens-operation-and-inputs",level:3},{value:"Understanding lens capabilities",id:"understanding-lens-capabilities",level:2},{value:"Adding CSS classes for highlighting/collapsing",id:"adding-css-classes-for-highlightingcollapsing",level:3},{value:"Adding HTML tags for hyperlinks/media",id:"adding-html-tags-for-hyperlinksmedia",level:3},{value:"Limitations",id:"limitations",level:2},{value:"Remove original content",id:"remove-original-content",level:3},{value:"High power computation",id:"high-power-computation",level:3},{value:"Client-Side Performance",id:"client-side-performance",level:4},{value:"Server-Side Scalability",id:"server-side-scalability",level:4},{value:"Ephemeral Execution",id:"ephemeral-execution",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"introduction",children:"Introduction"})}),"\n",(0,s.jsx)(n.h2,{id:"what-are-lenses-and-how-they-contribute-to-the-focusing-mechanism",children:"What are lenses and how they contribute to the Focusing Mechanism?"}),"\n",(0,s.jsx)(n.admonition,{title:"Focusing Mechanism",type:"info",children:(0,s.jsx)(n.p,{children:"The Focusing Mechanism is defined as adapting information to the context of the end user for effective and optimal understanding of the information. This transformation (adaptation) is applied primarily to the Patient Information Leaflet (PIL) contained within the electronic Product Information (ePI)."})}),"\n",(0,s.jsxs)(n.p,{children:["Lenses are the ",(0,s.jsx)(n.strong,{children:"executable core"})," of this adaptation process. A lens is an algorithm that encodes specific knowledge\u2014such as medical facts, biochemical behavior, or cultural aspects\u2014in the form of rules (e.g., if-then-else logic) required to automatically decide how best to adapt the content."]}),"\n",(0,s.jsx)(n.admonition,{title:"Lens Capabilities",type:"tip",children:(0,s.jsxs)(n.p,{children:["Lenses contribute to the Focusing Mechanism by determining which sections of the ePI text should be ",(0,s.jsx)(n.strong,{children:"highlighted, collapsed, or left unchanged"}),". They can also ",(0,s.jsx)(n.strong,{children:"enrich the content"})," by adding supplementary features like icons, videos, or interactive elements. The end result of the process is the ",(0,s.jsxs)(n.strong,{children:["focused ePI (",(0,s.jsx)(n.em,{children:"f(ePI)"}),")"]}),", which is an enhanced and personalized version of the original ePI."]})}),"\n",(0,s.jsx)(n.h3,{id:"lens-operation-and-inputs",children:"Lens Operation and Inputs"}),"\n",(0,s.jsxs)(n.p,{children:["A lens is designed to execute within the ",(0,s.jsx)(n.strong,{children:"Lens Execution Environment (LEE)"}),". To perform personalization effectively, the lens uses three critical inputs:"]}),"\n",(0,s.jsx)(n.admonition,{title:"Critical Inputs",type:"note",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Preprocessed ePI (",(0,s.jsx)(n.em,{children:"p(ePI)"}),")"]}),": This version of the ePI has been semantically annotated by ",(0,s.jsx)(n.a,{href:"/docs/tutorial-Preprocessor/Introduction",children:"Pre-processors"}),", linking sections of the medical text to standard terminologies."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"International Patient Summary (IPS)"}),": This contains clinical data relevant to the patient's health, such as existing conditions or allergies."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Persona Vector (PV)"}),": This extends the IPS by codifying and standardizing the patient's context and preferences (e.g., age, gender, pregnancy status)."]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.admonition,{title:"Lens Packaging",type:"info",children:(0,s.jsxs)(n.p,{children:["Lenses are packaged as ",(0,s.jsx)(n.strong,{children:"FHIR objects"})," (specifically, using the ",(0,s.jsx)(n.a,{href:"/docs/tutorial-Lens/FHIR%20metadata",children:"Lens Profile archetype"}),") and contain their code, in JavaScript, encoded in Base64. The LEE must ensure that the lenses can operate successfully in both client-side and server-side focusing modes."]})}),"\n",(0,s.jsx)(n.h2,{id:"understanding-lens-capabilities",children:"Understanding lens capabilities"}),"\n",(0,s.jsxs)(n.p,{children:["Lenses modify the content display and structure by modifying the embedded HTML code within the FHIR resource. These modifications are categorized into two types: ",(0,s.jsx)(n.strong,{children:"attention detail modification"})," and ",(0,s.jsx)(n.strong,{children:"addition of supplementary information"}),". These changes are executed by calling LEE helper methods, such as ",(0,s.jsx)(n.code,{children:"modifyCSSClass()"})," and ",(0,s.jsx)(n.code,{children:"addNewContent()"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"adding-css-classes-for-highlightingcollapsing",children:"Adding CSS classes for highlighting/collapsing"}),"\n",(0,s.jsxs)(n.p,{children:["This capability is used for ",(0,s.jsx)(n.strong,{children:"attention detail modification"}),". By adding specific CSS class attributes to existing or newly created HTML elements within the ePI text (e.g., ",(0,s.jsx)(n.code,{children:"<span>"})," or existing tags), lenses instruct the rendering application on how to present that section to the user."]}),"\n",(0,s.jsxs)(n.admonition,{title:"Three Levels of Attention",type:"tip",children:[(0,s.jsx)(n.p,{children:"The goal is to establish three levels of attention:"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:'"highlight"'})}),": This class indicates sections that are ",(0,s.jsx)(n.strong,{children:"extremely relevant"})," to the patient and their condition, suggesting they must be read and completely understood."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:'"collapse"'})}),": This class indicates content that is ",(0,s.jsx)(n.strong,{children:"not relevant"})," to the specific patient's context. The resulting display suggests the user can safely skim or skip these sections (suppress/hide them)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Standard Level"}),": Text without either class maintains the original, standard level of attention intended by regulators."]}),"\n"]}),"\n"]})]}),"\n",(0,s.jsx)(n.admonition,{title:"Stacking Lenses",type:"warning",children:(0,s.jsxs)(n.p,{children:["When multiple lenses are stacked, developers must ensure that if an element already possesses a class attribute (i.e., from a previously executed lens), the new class attribute is handled appropriately, prioritizing the larger attention detail (e.g., if the current lens states a section needs to be ",(0,s.jsx)(n.code,{children:'"collapse"'}),", but the class is already ",(0,s.jsx)(n.code,{children:'"highlight"'}),", then ",(0,s.jsx)(n.code,{children:'"highlight"'})," should prevail)."]})}),"\n",(0,s.jsx)(n.h3,{id:"adding-html-tags-for-hyperlinksmedia",children:"Adding HTML tags for hyperlinks/media"}),"\n",(0,s.jsx)(n.p,{children:"Lenses utilize this capability to add supplementary information. This involves injecting new HTML tags into the document structure to enrich the content."}),"\n",(0,s.jsxs)(n.admonition,{title:"Examples of Supplementary Information",type:"tip",children:[(0,s.jsx)(n.p,{children:"Lenses can add:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Adding hyperlinks to relevant Supporting Material (SM), documents, or services"}),"\n",(0,s.jsx)(n.li,{children:"Embedding images, videos, or icons (such as pictograms)"}),"\n",(0,s.jsx)(n.li,{children:"Creating interactive elements, such as hover boxes or glossary functions, to provide clarifications on specific terms"}),"\n"]})]}),"\n",(0,s.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsx)(n.admonition,{title:"Regulatory Constraints",type:"danger",children:(0,s.jsx)(n.p,{children:"Lenses operate under stringent limitations imposed by regulatory, legal, and performance requirements."})}),"\n",(0,s.jsx)(n.h3,{id:"remove-original-content",children:"Remove original content"}),"\n",(0,s.jsx)(n.admonition,{title:"Critical Limitation",type:"warning",children:(0,s.jsxs)(n.p,{children:["The most important limitation is that Lenses ",(0,s.jsx)(n.strong,{children:"cannot remove content"}),". They also ",(0,s.jsx)(n.strong,{children:"cannot change the content"})," of the ePI compared to the original, regulated text."]})}),"\n",(0,s.jsxs)(n.p,{children:["This constraint is based on the recognition that ePI information is highly regulated text and must be preserved exactly as approved (considered legal text). Even advanced lenses carry the risk of not capturing all extreme cases, meaning the original ePI information must always be available to patients. Lenses are limited to modifying the ",(0,s.jsx)(n.em,{children:"format"})," in which the content is displayed, primarily by allowing content to be suppressed or collapsed (hidden but accessible)."]}),"\n",(0,s.jsx)(n.h3,{id:"high-power-computation",children:"High power computation"}),"\n",(0,s.jsx)(n.admonition,{title:"Performance Requirements",type:"warning",children:(0,s.jsx)(n.p,{children:"Lenses must be designed to be computationally light for optimal operation in diverse environments:"})}),"\n",(0,s.jsx)(n.h4,{id:"client-side-performance",children:"Client-Side Performance"}),"\n",(0,s.jsxs)(n.p,{children:["Lenses should be designed to run efficiently on ",(0,s.jsx)(n.strong,{children:"patients' phones"}),". If clients opt for client-side focusing (for privacy or other reasons), the lens must execute locally with locally stored patient information."]}),"\n",(0,s.jsx)(n.h4,{id:"server-side-scalability",children:"Server-Side Scalability"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.strong,{children:"server-side focusing"})," is employed, the focusing operation must ",(0,s.jsx)(n.strong,{children:"scale for many users"}),". Computational demands must be minimized to ensure the system maintains an acceptable response speed and uninterrupted performance."]}),"\n",(0,s.jsx)(n.h4,{id:"ephemeral-execution",children:"Ephemeral Execution"}),"\n",(0,s.jsxs)(n.p,{children:["Fully Focused ePIs (",(0,s.jsx)(n.em,{children:"f(ePI)"}),") are ",(0,s.jsx)(n.strong,{children:"NOT cached"})," because the results change based on different contexts. Therefore, lens execution is considered ephemeral, further necessitating lightweight operation since the process may be run frequently."]}),"\n",(0,s.jsx)(n.admonition,{title:"Best Practice",type:"tip",children:(0,s.jsxs)(n.p,{children:["When designing Lenses, developers should always aim to ",(0,s.jsxs)(n.strong,{children:["rely on ",(0,s.jsx)(n.a,{href:"/docs/tutorial-Preprocessor/Introduction",children:"Pre-processors"})]})," to perform highly demanding computational tasks, such as complex NLP model execution or semantic analysis, leaving the Lenses to execute the logic based on the Preprocessors' annotations."]})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);