"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[932],{6213:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"tutorial-Lens/FHIR metadata","title":"FHIR Metadata","description":"The Lens Profile is the FHIR resource archetype used to package Lenses, which encode the specific logic (algorithm) required to automatically adapt ePI content for personalization. This profile is derived from the standard FHIR Library resource.","source":"@site/docs/tutorial-Lens/2 - FHIR metadata.md","sourceDirName":"tutorial-Lens","slug":"/tutorial-Lens/FHIR metadata","permalink":"/docs/tutorial-Lens/FHIR metadata","draft":false,"unlisted":false,"editUrl":"https://github.com/gravitate-health/gravitate-health.github.io/tree/main/docs/tutorial-Lens/2 - FHIR metadata.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Using Lens Bundler","permalink":"/docs/tutorial-Lens/Using Lens Bundler"},"next":{"title":"Basic lens structure","permalink":"/docs/tutorial-Lens/Implementation strategies"}}');var s=n(4848),l=n(8453);const r={},d="FHIR Metadata",a={},o=[{value:"Key Fields for Lens Resource Creation (Lens Profile)",id:"key-fields-for-lens-resource-creation-lens-profile",level:2},{value:"1. Lens Code and Data (<code>content</code> Element)",id:"1-lens-code-and-data-content-element",level:3},{value:"2. Name, Title, and Identification",id:"2-name-title-and-identification",level:3},{value:"3. Descriptive Metadata",id:"3-descriptive-metadata",level:3},{value:"FHIR Lens Example (Conceptual Snippet)",id:"fhir-lens-example-conceptual-snippet",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"fhir-metadata",children:"FHIR Metadata"})}),"\n",(0,s.jsx)(t.admonition,{title:"Lens Profile",type:"info",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.a,{href:"https://build.fhir.org/ig/hl7-eu/gravitate-health/StructureDefinition-lens.html",children:"Lens Profile"})})," is the FHIR resource archetype used to package Lenses, which encode the specific logic (algorithm) required to automatically adapt ePI content for personalization. This profile is derived from the standard ",(0,s.jsx)(t.a,{href:"https://build.fhir.org/library.html",children:"FHIR Library resource"}),"."]})}),"\n",(0,s.jsxs)(t.p,{children:["Lenses are treated as fully fledged FHIR resources and must contain both the operational code and descriptive metadata. The specification requires several key fields, many of which can include translations via the FHIR ",(0,s.jsx)(t.code,{children:"extension:translation"})," ",(0,s.jsx)(t.a,{href:"https://build.fhir.org/ig/HL7/fhir-extensions/StructureDefinition-translation.html",children:"mechanism"}),"."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"key-fields-for-lens-resource-creation-lens-profile",children:"Key Fields for Lens Resource Creation (Lens Profile)"}),"\n",(0,s.jsxs)(t.h3,{id:"1-lens-code-and-data-content-element",children:["1. Lens Code and Data (",(0,s.jsx)(t.code,{children:"content"})," Element)"]}),"\n",(0,s.jsx)(t.admonition,{title:"Security",type:"warning",children:(0,s.jsx)(t.p,{children:"This element contains the executable algorithm of the lens. The lens code handles sensitive information and requires close monitoring, making the integrity of this field essential."})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"FHIR Path"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Constraints & Usage"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"content.data"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The code of the lens - base64. This field stores the executable piece of code."}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["This is a ",(0,s.jsx)(t.strong,{children:"required"})," Must-Support (S) element. The value must be the data inline, Base64 encoded (",(0,s.jsx)(t.code,{children:"base64Binary"}),"). The recommended language for lens code is JavaScript."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"content.contentType"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Mime type of the content."}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["This field specifies the data type, usually matching the coding language (e.g., ",(0,s.jsx)(t.code,{children:"application/javascript"})," for JavaScript code)."]})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"2-name-title-and-identification",children:"2. Name, Title, and Identification"}),"\n",(0,s.jsx)(t.p,{children:"These fields provide technical and human-readable labels for the lens."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"FHIR Path"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Constraints & Usage"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"name"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Name for this library (computer friendly)."}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.strong,{children:"Required"})," (C1..1) and Must-Support (S\u03a3). This name should be usable as an identifier by machine processing applications."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"title"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Name for this library (human friendly)."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"This field is a standard FHIR string element."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"identifier"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional identifier for the library."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"This is a required Must-Support (S\u03a3) element."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"version"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Business version of the library."}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.strong,{children:"Required"})," describes the version of this lens."]})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"3-descriptive-metadata",children:"3. Descriptive Metadata"}),"\n",(0,s.jsx)(t.admonition,{title:"Purpose",type:"note",children:(0,s.jsx)(t.p,{children:"These fields communicate the functional and scientific context of the lens to both developers and end-users."})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"FHIR Path"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Constraints & Usage"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"publisher"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Name of the publisher/steward (organization or individual)."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"This field indicates who is responsible for the lens development."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"description"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:'Documentation. This should detail what the lens "does".'}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.strong,{children:"Required"})," (1..1) Must-Support (S\u03a3) field using Markdown format."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"purpose"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Intent. This describes why the lens should be used and the scientific basis or kind of conditions it is looking for."}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.strong,{children:"Required"})," (1..1) Must-Support (S) field using Markdown format."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"type"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The type of knowledge asset this library contains."}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["This is a required field fixed to the value of ",(0,s.jsx)(t.code,{children:"logical-library"}),"."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"subject[x]"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Type of individual the library content is focused on."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Must-Support element."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"jurisdiction"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Countries and regions within which this artifact is targeted for use."}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"This is an important Must-Support field because Trust Functions (TF) can be customized for different regions (jurisdictional based TF)."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"extension:lee-version"})})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"LEE version - string."}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["This is a ",(0,s.jsx)(t.strong,{children:"mandatory extension"})," required to indicate compatibility with the Lens Execution Environment (LEE)."]})]})]})]}),"\n",(0,s.jsx)(t.admonition,{title:"Regional Customization",type:"tip",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"jurisdiction"})," field is particularly important as Trust Functions can be customized for different regions, enabling jurisdictional-based Trust Functions."]})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"fhir-lens-example-conceptual-snippet",children:"FHIR Lens Example (Conceptual Snippet)"}),"\n",(0,s.jsxs)(t.p,{children:["The Lens Profile is structured as a FHIR ",(0,s.jsx)(t.code,{children:"Library"})," resource. A developer would populate these fields using JSON (or XML) formatting:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "resourceType": "Library",\n  "meta": {\n    // Reference to the Lens Profile\n    "profile": [ "http://hl7.eu/fhir/ig/gravitate-health/StructureDefinition/lens" ]\n  },\n  "extension": [\n    // 1. Mandatory LEE Version Extension\n    {\n      "url": "http://hl7.eu/fhir/ig/gravitate-health/StructureDefinition/lee-version",\n      "valueString": "dev" \n    }\n  ],\n  "identifier": [ \n    // Identifier must follow the specified system pattern\n    {\n      "system": "http://gravitate-health.lst.tfo.upm.es",\n      "value": "my-lens-v1" \n    }\n  ],\n  "version": "1.0.0", \n  "name": "MyLens", // Computer friendly name\n  "title": "My Warning Lens", // Human friendly name\n  "status": "active", // Required status\n  "type": { // Fixed value defining resource type as logical-library\n    "coding": [\n      {\n        "code": "logical-library" \n      }\n    ]\n  },\n  "publisher": "Gravitate Health Team", // Organization responsible\n  "description": "This lens highlights sections related to my specific risk/safety, based on a patient\'s gender and age.", // Documentation (Markdown)\n  "purpose": "To improve patient safety and understanding of medicinal risks by emphasizing relevant text.", // Intent (Markdown)\n  "jurisdiction": [\n    {\n      "coding": [\n        {\n          "display": "European Union" \n        }\n      ]\n    }\n  ],\n  "content": [\n    {\n      "contentType": "application/javascript",\n      "data": "ZnVuY3Rpb24gZW5oYW5jZSgpIHsgLy8gQmFzZTY0IGVuY29kZWQgbGVucyBjb2RlLi4uIH0=" \n      // Base64-encoded executable JavaScript code for the lens\n    }\n  ]\n}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>d});var i=n(6540);const s={},l=i.createContext(s);function r(e){const t=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);